{% extends "base.html" %}

{% load static %}

{% load imagekit %}

{% block android_header %}
    {% with mdl_navigation__link__current='dashboard' %}
        {{ block.super }}
    {% endwith %}
{% endblock %}

{% block android_drawer %}
    {% with mdl_navigation__link__current='dashboard' %}
        {{ block.super }}
    {% endwith %}
{% endblock %}

{% block body %}

    <div class="mdl-cell mdl-cell--12-col mdl-grid">
        {% for object in object_list %}

            <div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col">

                <div class="mdl-card__title">
                    <h4 class="mdl-card__title-text">{{ object.type }} ({{ object.artists.count }})</h4>
                </div>

                <div class="mdl-card__actions mdl-card--border">
                    <ul class="mdl-list lx-list mdl-grid">
                        {% for artist in object.artists %}
                            <li class="mdl-list__item mdl-list__item--two-line mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--4-col-phone">
                                <span class="mdl-list__item-primary-content">
                                  <a href="{% url 'portal:artist-detail-record-list' artist.id %}">
{#                                    <i class="material-icons mdl-list__item-avatar">person</i>#}
                                      {% if artist.artistavatar and artist.artistavatar.image_exists %}
                                          {% generateimage 'myapp:thumbnail-dashboard' source=artist.artistavatar.image as th %}
                                          <img class="material-icons mdl-list__item-avatar mdl-chip__contact"
                                               src="{{ th.url }}">
                                      {% else %}
                                          <i class="material-icons mdl-list__item-avatar">person</i>
                                      {% endif %}
                                  </a>
                                  <a href="{% url 'portal:artist-detail-record-list' artist.id %}">
                                      <span>{{ artist.name }}</span>
                                  </a>
                                  <span class="mdl-list__item-sub-title">{{ artist.record_set.count }} 张专辑</span>
                                </span>
                            </li>
                        {% endfor %}
                    </ul>
                </div>

            </div>
        {% endfor %}
    </div>

{% endblock %}

