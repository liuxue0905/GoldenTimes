{% extends "base.html" %}

{% load static %}
{% load imagekit %}

{% block android_header %}
    {% with mdl_navigation__link__current='artist-list' %}
        {{ block.super }}
    {% endwith %}
{% endblock %}

{% block body %}

    {% with artist=object %}

        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'portal:dashboard' %}">首页</a></li>
                <li class="breadcrumb-item"><a href="{% url 'portal:artist-list' %}">歌手</a></li>
                <li class="breadcrumb-item active" aria-current="page">{{ artist.name }}</li>
            </ol>
        </nav>

        <div class="row no-gutters bg-light position-relative">
            <div class="cols-sm-1 col-md-3 col-lg-3 col-xl-3 mb-md-0 p-md-4">
                {#                {% generateimage 'myapp:thumbnail' source=artist.artistavatar.image -- alt=artist.name id=artist.id %}#}
                {#                <img src="{{ artist.artistavatar.image.url }}" class="w-100" alt="{{ artist.name }}">#}
                <img src="/api/artists/{{ artist.id }}/cover" class="w-100" alt="{{ artist.name }}">
            </div>
            <div class="col-md-6 position-static p-4 pl-md-0">
                <h5 class="mt-0">{{ artist.name }}</h5>
                <p>
                    <span>歌手类型: {{ artist.type_value|default_if_none:'-' }}</span>
                    <br>
                    <br>
                    <span>专辑: {{ artist.record_set.count }}</span>
                    <br>
                    <span>歌曲: {{ artist.song_set.count }}</span>
                    <br>
                    <span>参与专辑: {{ artist.record_involved_set.count }}</span>
                </p>
                <p>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras
                    purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi
                    vulputate fringilla. Donec lacinia congue felis in faucibus.</p>
                <a href="#" class="stretched-link">Go somewhere</a>
            </div>
        </div>

        {#        <div class="card text-center">#}
        <div class="card">
            <div class="card-header">
                {% block tab_bar %}
                    <ul class="nav nav-tabs card-header-tabs">
                        <li class="nav-item">
                            <a class="nav-link {% ifequal mdl_tabs_tab_is_active 'artist-detail-record-list' %}active{% endifequal %}"
                               href="{% url 'portal:artist-detail-record-list' artist.id %}">唱片</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% ifequal mdl_tabs_tab_is_active 'artist-detail-song-list' %}active{% endifequal %}"
                               href="{% url 'portal:artist-detail-song-list' artist.id %}">歌曲</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% ifequal mdl_tabs_tab_is_active 'artist-detail-record-list-involved' %}active{% endifequal %}"
                               href="{% url 'portal:artist-detail-record-list-involved' artist.id %}">参与</a>
                        </li>
                    </ul>
                {% endblock %}
            </div>
            <div class="card-body">
                <h5 class="card-title">Special title treatment</h5>
                <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                <a href="#" class="btn btn-primary">Go somewhere</a>
            </div>
            <div class="card-body">
                {% block tabs %}
                {% endblock %}
            </div>
        </div>

        {% if artist.artistimages_set.all %}
            <div class="card text-center">
                <div class="card-header">
                    <ul class="nav nav-tabs card-header-tabs">
                        <li class="nav-item">
                            <a class="nav-link active" href="#">图片</a>
                        </li>
                    </ul>
                </div>

                <div class="card-body">
                    <div class="row row-cols-2 row-cols-sm-2 row-cols-md-4 row-cols-lg-5 row-cols-xl-5"
                         style="flex-wrap: nowrap; overflow-x: auto;">
                        {% for artistimage in artist.artistimages_set.all %}
                            <div class="col mb-4">
                                <div class="card">
                                    <div class="embed-responsive embed-responsive-1by1 card-img-top">
                                        <img src="https://www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png"
                                             class="embed-responsive-item img-thumbnail "
                                             alt="{{ artist.name }}">
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% endif %}

        {#        {% if artistimage.image_exist %}#}
        {#                                            {% generateimage 'myapp:thumbnail' source=artistimage.image -- alt=artist.name id=artist.id %}#}
        {#                                        {% else %}#}
        {#                                            #}
        {#                                        {% endif %}#}

    {% endwith %}

{% endblock %}